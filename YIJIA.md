### 运行程序：

`FILE=ST`
`AM.ST`
`996`
`code:`
`G07 VP=40`

`G08 ÊäÈëÉ¨Ãè:`
`G06 T=500`
`G06 SCAN=I` #读取输入端口值
`G08 IF V144==#0 ACALL D0`  #YJ X1
`G08 IF V145==#0 ACALL D1`  #YJ X2
`G08 IF V146==#0 ACALL D2`  #YJ X3
`G08 IF V147==#0 ACALL D3`  #YJ X4
`G08 IF V148==#0 ACALL D4`  #YJ X5
`G08 IF V149==#0 ACALL D5`  #YJ X6
`G08 IF V154==#0 ACALL D10`  #YJ X7
`G08 IF V155==#0 ACALL D11`  #YJ X8
`G08 IF V156==#0 ACALL D12`  #YJ X9
`G08 IF V157==#0 ACALL D13`  #YJ X10
`G08 IF V158==#0 ACALL D14`  #YJ X11
`G08 IF V159==#0 ACALL D15`  #YJ X12

`G08 AJMP ÊäÈëÉ¨Ãè`#跳转到xx行

`G08 D10:` #杯子一号
`G06 O=P7.1` #P7打开
`G06 T=1000`
`G06 I=P9.0` #等待P9为低电平
`G00 J2=27.6935 J3=26.3503`
`G06 O=P7.0` #P7关闭
`G08 END`

`G08 D11:` #杯子二号
`G06 O=P7.1`
`G06 T=1000`
`G06 I=P9.0`
`G00 J2=55.1981 J3=53.4481`
`G06 O=P7.0`
`G08 END`

`G08 D12:` #杯子三号
`G06 O=P7.1`
`G06 T=1000`
`G06 I=P9.0`
`G00 J2=82.5373 J3=81.124`
`G06 O=P7.0`
`G08 END`

`G08 D13:`
`G06 O=P7.1`
`G06 T=1000`
`G06 I=P9.0`
`G00 J1=-178`
`G06 O=P7.0`
`G08 END`

`G08 D0:`
`G00 J1=-215`
`G08 END`

`G08 D1:`
`G00 J1=15`
`G08 END`

`G08 D2:`
`G00 J2=0 J3=0`
`G08 END`

`G08 D3:`
`G00 J2=27.6935 J3=26.3503`
`G08 END`

`G08 D4:`
`G00 J2=55.1981 J3=53.4481`
`G08 END`

`G08 D5:`
`G00 J2=0 J3=0`
`G08 END`

### **复位程序：**

`FILE=OQ`
`AM.ST`
`1754`
`code:`
`//--------------------`
`G07 P J1=0` #强制J1轴为绝对角度0
`G07 P J2=0`
`G07 P J3=0`
`//G07 P J4=0`
`//G07 P J5=0`z
`//G07 P J6=0`
`G00 J1=0 J2=0 J3=0 J4=0 J5=0 J6=0`
`//G08 ACALL J5HM`
`//G08 ACALL J4HM`
`G08 ACALL J2HM` #从角度增加方向找HOME感应器
`G08 ACALL J3HM`
`G08 ACALL J1HM`
`//G08 ACALL J6HM`
`G07 P J1=-220`
`G07 P J2=-107`
`G07 P J3=-109`
`//G07 P J4=62`
`//G07 P J5=-9`
`//G07 P J6=-60`
`G07 VE=30000`
`G00 J1=0 J2=0 J3=0 J4=0 J5=0 J6=0`
`G07 BODY=READ`
`G08 AJMP KAISHI`

`G08 J1HM:`
`G07 VE=30000`
`G06 SCAN=I`
`G08 IF V192==#0 ACALL ISHOME `   #V192: HMO P16
`G06 REPOS=-J1`
`G00 J1=3`
`G06 SCAN=I`
`G08 IF V192==#0 AJMP J1HM`
`G07 VE=5000`
`G06 REPOS=-J1`
`G00 J1=0`
`G08 END`
`G08 ISHOME:`
`G00 J1=5`
`G08 END`

`G08 J2HM:`
`G07 VE=30000`
`G06 SCAN=I`
`G08 IF V193==#0 ACALL J2ISHOME`
`G06 REPOS=-J2`
`G00 J2=3`
`G06 SCAN=I`
`G08 IF V193==#0 AJMP J2HM`
`G07 VE=5000`
`G06 REPOS=-J2`
`G00 J2=0`
`G08 END`
`G08 J2ISHOME:`
`G00 J2=5`
`G08 END`

`G08 J3HM:`
`G07 VE=30000`
`G06 SCAN=I`
`G08 IF V194==#0 ACALL J3ISHOME`
`G06 REPOS=-J3`
`G00 J3=3`
`G06 SCAN=I`
`G08 IF V194==#0 AJMP J3HM`
`G07 VE=5000`
`G06 REPOS=-J3`
`G00 J3=0`
`G08 END`
`G08 J3ISHOME:`
`G00 J3=5`
`G08 END`

`G08 J4HM:`
`G07 VE=20000`
`G06 SCAN=I`
`G08 IF V195==#0 ACALL J4ISHOME`
`G06 REPOS=J4`
`G00 J4=-3`
`G06 SCAN=I`
`G08 IF V195==#0 AJMP J4HM`
`G07 VE=5000`
`G06 REPOS=J4`
`G00 J4=0`
`G08 END`
`G08 J4ISHOME:`
`G00 J4=-5`
`G08 END`

`G08 J5HM:`
`G07 VE=20000`
`G06 SCAN=I`
`G08 IF V196==#0 ACALL J5ISHOME`
`G06 REPOS=J5`
`G00 J5=-10`
`G06 SCAN=I`
`G08 IF V196==#0 AJMP J5HM`
`G07 VE=5000`
`G06 REPOS=J5`
`G00 J5=0`
`G08 END`
`G08 J5ISHOME:`
`G00 J5=-5`
`G08 END`

`G08 J6HM:`
`G07 VE=30000`
`G06 SCAN=I`
`G08 IF V197==#0 ACALL J6ISHOME`
`G06 REPOS=-J6`
`G00 J6=3`
`G06 SCAN=I`
`G08 IF V197==#0 AJMP J6HM`
`G07 VE=30000`
`G06 REPOS=-J6`
`G00 J6=0`
`G08 END`
`G08 J6ISHOME:`
`G00 J6=10`
`G08 END`

`G08 KAISHI:`
`G08 FLTAB=T_0`
`G08 CLOSE`



### 参数：

FILE=INI
Parameter.ini
726
////DH_PARAMETER:
_h0=251.15;
_d1=112.84;
_h2=348;
_d3=115.95;
_h4=328.15;
_h5=153.9;
_d6=40;
////MOTOR_DIR:
_dir1=-1;
_dir2=1;
_dir3=1;
_dir4=1;
_dir5=-1;
_dir6=1;
////JOINT_PUL:
_j1pul=600000;
_j2pul=600000;
_j3pul=600000;
_j4pul=528000;
_j5pul=400000;
_j6pul=400000;
////VELOCITY:
_ac=100000.0;
_de=100000.0;
_vpp=80000.0;
_vp=10;
////MODE:
_pve=8.887
_getCodeMode=1;
_runCodeMode=1;
_prmTPUL=90;
//REPOS
_rePosJ1=0;
_rePosJ2=0;
_rePosJ3=-90;
_rePosJ4=0;
_rePosJ5=-90;
_rePosJ6=0;
//LIMIT
_sLp0=170
_sLn0=-170
_sLp1=80
_sLn1=-80
_sLp2=0
_sLn2=-150
_sLp3=120
_sLn3=-120
_sLp4=85
_sLn4=-110
_sLp5=180
_sLn5=-180

_boot=G06 T=200
_boot=G07 POWREROFF=0
_boot=G06 BOOT=RST